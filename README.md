# clion
common.js like modele for client side

[ветка gh-pages ~1.5кб] https://impfromliga.github.io/clion/
он грузит XHR'ом и ищет регексом в теле запросы вида require("dep"), и сначало рекурсивно прогружает их, потом (без единого изменения в коде) вставляет скрипт в iframe, через стандартный &lt;script src="dep.js"&gt; (повторной загрузки не происходит, т.к. XHR'ответ браузером кешируется) В результате в отладчике мы видим неизменный код и номера строк и источники скриптов не путаются как в случае обертки.

[ветка master ~1кб] первая версия с оберткой принцип рекурсии тот же самый, но в отличае от популярного для таких библиотек решения с пухлой оберткой на колбеках делается минимальная "(function(){/*code*/})()" только чтобы нэймспейс уберечь.
соединение же модулей до тупого просто:
в глобал добавляется объект "replace = {}"
происходит replace(regex) по исходникам, зменяются
"module.export =" на "require[dep] ="
"= require(dep)" на "= require[dep]"
т.к. за очередностью вставки следит парсер "= require[dep]" всегда будет доступен
код модуля слегка меняется но при дебаге остается максимально лаконичным

ИТОГО:

плюс master версии в том, что она максимально компактна и лаконична, и в том что она работает по принципу билдера, это значит ее вывод легко можно использовать для прекомпиляции проекта, находя при том компромис удобства и для дебага.

плюс gh-pages версии - она максимально удобна для дебага
